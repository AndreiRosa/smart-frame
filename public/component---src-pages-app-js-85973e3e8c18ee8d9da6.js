(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{y9VM:function(e,t,a){"use strict";a.r(t);a("VRzm"),a("Btvt");var n,r=a("o0o1"),c=a.n(r),l=(a("ls82"),a("q1tI")),s=a.n(l),o=a("YwZP"),d=a("Zttt"),i=a("Wbzz"),u=a("leoJ"),m=function(){Object(u.b)();return s.a.createElement("div",null,s.a.createElement("h1",null,"Create Scene"))},p=(a("91GP"),a("f3/d"),a("6QdR")),h=function(e){var t=e.scene;return s.a.createElement("div",{className:"max-w-sm rounded overflow-hidden shadow-lg"},s.a.createElement("img",{className:"w-full",src:"https://source.unsplash.com/random/384x234",alt:"Sunset in the mountains"}),s.a.createElement("div",{className:"px-6 py-4"},s.a.createElement("div",{className:"font-bold text-xl mb-2"},s.a.createElement(i.a,{className:"hover:underline",to:"app/scene/"+t.id},t.name))))},f=function(){var e=Object(u.b)(),t=Object(l.useState)(""),a=t[0],n=t[1],r=Object(l.useState)([]),c=r[0],o=r[1],d=p.a.firestore();Object(l.useEffect)((function(){e.isAuthReady&&d.collection("scenes").doc(e.udi).collection("scenes").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object.assign({},e.data(),{id:e.id}))})),o(t)}))}),[d,e]);return s.a.createElement("div",null,s.a.createElement("h1",null,"Scenes"),s.a.createElement("div",{className:"mx-auto max-w-lg mb-12"},s.a.createElement("div",{className:"py-1"},s.a.createElement("span",{className:"px-1 text-sm text-gray-600"},"Name your scene"),s.a.createElement("input",{value:a,name:"sceneName",onChange:function(e){n(e.target.value)},placeholder:"",type:"text",className:"text-md block px-3 py-2 rounded-lg w-full bg-white border-2 border-gray-300 placeholder-gray-600 shadow-md focus:placeholder-gray-500 focus:bg-white focus:border-gray-600 focus:outline-none"}),s.a.createElement("button",{type:"button",onClick:function(){d.collection("scenes").doc(e.uid).collection("scenes").doc().set({name:a})},className:"mt-3 text-lg font-semibold bg-gray-800 w-full text-white rounded-lg px-6 py-3 block shadow-xl hover:text-white hover:bg-black"},"Create Scene"))),s.a.createElement("div",{className:"grid grid-cols-3 gap-4"},c.map((function(e){return s.a.createElement(h,{key:e.id,scene:e})}))))},v=(a("rGqo"),a("yt8O"),a("RW0V"),function(e){var t=e.id,a=e.uid,n=e.sceneId,r=e.frame,c=p.a.firestore(),o=Object(l.useState)({color:"green",showMarkers:!1}),d=o[0],i=o[1],u=function(e){var t=e.target.name,a="checkbox"===e.target.type?e.target.checked:e.target.value;i((function(e){var n;return Object.assign({},e,((n={})[t]=a,n))}))};return s.a.createElement("div",{className:"border-solid m-8 border-gray-200 m-8 p-8"},s.a.createElement("h1",{className:"font-bold"},"Chroma Key"),s.a.createElement("select",{onChange:u,name:"color",value:d.color},[{value:"green",label:"Green"},{value:"blue",label:"Blue"},{value:"red",label:"Red"}].map((function(e){return s.a.createElement("option",{value:e.value},e.label)}))),s.a.createElement("label",null,s.a.createElement("input",{type:"checkbox",onChange:u,checked:d.showMarkers,name:"showMarkers",value:!0})," Show tracking markers"),s.a.createElement("button",{onClick:function(){c.collection("frames").doc(a).collection(n).doc(t);r.update({settings:d})}},"Save"))}),w=function(){return s.a.createElement("div",{className:"border-solid m-8 border-gray-200 m-8 p-8"},s.a.createElement("h1",{className:"font-bold"},"Image"))},b={chromakey:{key:"chromakey",label:"Add chroma key"},image:{key:"image",label:"Add image"},counter:{key:"counter",label:"Add counter"}},g=((n={})[b.chromakey.key]=function(e){e.id;return v},n[b.chromakey.image]=function(e){e.id;return w},n[b.chromakey.counter]=function(e){var t=e.id;return s.a.createElement("h1",null,"Component: Counter ",t)},n),E=function(e){var t=e.sceneId,a=Object(u.b)(),n=Object(l.useState)({}),r=n[0],c=n[1],o=Object(l.useState)([]),d=o[0],i=o[1],m=p.a.firestore();Object(l.useEffect)((function(){a.isAuthReady&&(m.collection("scenes").doc(a.udi).collection("scenes").doc(t).onSnapshot((function(e){c(Object.assign({},e.data,{id:t}))})),m.collection("frames").doc(a.udi).collection(t).onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object.assign({},e.data(),{id:e.id}))})),i(t)})))}),[m,a]);return s.a.createElement("div",null,s.a.createElement("h1",null,r.name),s.a.createElement("div",{className:"grid grid-cols-4 gap-4"},Object.keys(b).map((function(e){return s.a.createElement("div",{key:e,onClick:(n=e,function(){m.collection("frames").doc(a.uid).collection(t).doc().set({type:n})}),className:"text-center p-4 bg-white hover:bg-gray-100 h-32 w-32 shadow-md rounded flex items-end"},s.a.createElement("p",null,b[e].label));var n}))),s.a.createElement("div",null,d.map((function(e){var n=g[e.type];return s.a.createElement("p",null,s.a.createElement(n,{id:e.id,frame:e,uid:a.uid,scene:t}))}))))};function x(e,t,a,n,r,c,l){try{var s=e[c](l),o=s.value}catch(d){return void a(d)}s.done?t(o):Promise.resolve(o).then(n,r)}var y=function(){return s.a.createElement("div",{className:"bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md",role:"alert"},s.a.createElement("div",{className:"flex"},s.a.createElement("div",{className:"py-1"},s.a.createElement("svg",{className:"fill-current h-6 w-6 text-teal-500 mr-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"}))),s.a.createElement("div",null,s.a.createElement("p",{className:"font-bold"},"Password changed"))))},k=function(){var e=Object(u.b)(),t=Object(l.useState)({currentPasswd:"",passwd:"",passwd2:""}),a=t[0],n=t[1],r=Object(l.useState)(""),o=r[0],d=r[1],i=Object(l.useState)(!1),m=i[0],h=i[1],f=function(){var t,n=(t=c.a.mark((function t(){var n,r,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a.passwd.length>=6&&a.passwd===a.passwd2)){t.next=15;break}return t.prev=1,n=p.a.auth().currentUser,r=a.passwd,l=p.a.auth.EmailAuthProvider.credential(e.email,a.currentPasswd),t.next=7,n.reauthenticateWithCredential(l);case 7:return t.next=9,n.updatePassword(r);case 9:h(!0),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),d(t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})),function(){var e=this,a=arguments;return new Promise((function(n,r){var c=t.apply(e,a);function l(e){x(c,n,r,l,s,"next",e)}function s(e){x(c,n,r,l,s,"throw",e)}l(void 0)}))});return function(){return n.apply(this,arguments)}}(),v=function(e){var t=e.target.value,a=e.target.name;n((function(e){var n;return Object.assign({},e,((n={})[a]=t,n))})),d("")},w="",b="rounded-full p-1 fill-current mr-2";return a.passwd===a.passwd2&&a.passwd.length>=6?(w+="text-green-700",b+="bg-green-200 text-green-700"):(w+="text-red-700",b+="bg-red-200 text-red-700"),s.a.createElement("div",{className:"container max-w-full mx-auto md:py-4 px-6"},s.a.createElement("div",{className:"max-w-sm mx-auto px-6"},s.a.createElement("div",{className:"relative flex flex-wrap"},s.a.createElement("div",{className:"w-full relative"},s.a.createElement("div",{className:"md:mt-2"},m&&s.a.createElement(y,null),!m&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"text-center font-semibold text-black"},"Change password"),s.a.createElement("form",{className:"mt-8","x-data":"{password: '',password_confirm: ''}"},s.a.createElement("div",{className:"mx-auto max-w-lg "},s.a.createElement("div",{className:"py-1"},s.a.createElement("span",{className:"px-1 text-sm text-gray-600"},"Current password"),s.a.createElement("input",{value:a.currentPasswd,name:"currentPasswd",onChange:v,placeholder:"",type:"password",className:"text-md block px-3 py-2 rounded-lg w-full bg-white border-2 border-gray-300 placeholder-gray-600 shadow-md focus:placeholder-gray-500 focus:bg-white focus:border-gray-600 focus:outline-none"})),s.a.createElement("div",{className:"py-1"},s.a.createElement("span",{className:"px-1 text-sm text-gray-600"},"New password"),s.a.createElement("input",{placeholder:"",name:"passwd",value:a.passwd,onChange:v,type:"password","x-model":"password",className:"text-md block px-3 py-2 rounded-lg w-full bg-white border-2 border-gray-300 placeholder-gray-600 shadow-md focus:placeholder-gray-500 focus:bg-white focus:border-gray-600 focus:outline-none"})),s.a.createElement("div",{className:"py-1"},s.a.createElement("span",{className:"px-1 text-sm text-gray-600"},"Password Confirm"),s.a.createElement("input",{placeholder:"",name:"passwd2",value:a.passwd2,onChange:v,type:"password","x-model":"password_confirm",className:"text-md block px-3 py-2 rounded-lg w-full bg-white border-2 border-gray-300 placeholder-gray-600 shadow-md focus:placeholder-gray-500 focus:bg-white focus:border-gray-600 focus:outline-none"})),s.a.createElement("div",{className:"flex justify-start mt-3 ml-4 p-1"},s.a.createElement("ul",null,s.a.createElement("li",{className:"flex items-center py-1"},s.a.createElement("div",{className:b},s.a.createElement("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.passwd===a.passwd2&&a.passwd.length>=6&&s.a.createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"}),a.passwd!==a.passwd2&&a.passwd.length<6&&s.a.createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"}))),s.a.createElement("span",{className:w},a.passwd===a.passwd2&&a.passwd.length>=6&&"Passwords match.",a.passwd===a.passwd2&&a.passwd.length<6&&"Passwords must be at least 6 characters long.",a.passwd!==a.passwd2&&a.passwd.length>0&&"Passwords do not match.")),o&&s.a.createElement("li",{className:"flex items-center py-1"},s.a.createElement("div",{className:"rounded-full p-1 fill-current bg-red-200 text-red-700  mr-2"},s.a.createElement("svg",{className:"w-4 h-4",classIcon:!0,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},s.a.createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"}))),s.a.createElement("span",{className:w},o)))),s.a.createElement("button",{type:"button",onClick:f,className:"mt-3 text-lg font-semibold bg-gray-800 w-full text-white rounded-lg px-6 py-3 block shadow-xl hover:text-white hover:bg-black"},"Update")))))))))};function N(e,t,a,n,r,c,l){try{var s=e[c](l),o=s.value}catch(d){return void a(d)}s.done?t(o):Promise.resolve(o).then(n,r)}var j=function(){var e=Object(u.b)(),t=Object(l.useState)(""),a=t[0],n=t[1],r=Object(l.useState)([]),o=(r[0],r[1]),d=Object(l.useState)(""),i=d[0],m=d[1],h=p.a.firestore();Object(l.useEffect)((function(){e.isAuthReady&&h.collection("scenes").doc(e.uid).collection("scenes").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object.assign({},e.data(),{id:e.id}))})),o(t)}))}),[h,e]);var f=function(){var t,n=(t=c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=h.collection("temp-devices").doc(a),t.next=3,n.get();case 3:t.sent.data()?(m("VALID"),n.update({owner:e.uid})):m("INVALID");case 6:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(n,r){var c=t.apply(e,a);function l(e){N(c,n,r,l,s,"next",e)}function s(e){N(c,n,r,l,s,"throw",e)}l(void 0)}))});return function(){return n.apply(this,arguments)}}();return s.a.createElement("div",null,s.a.createElement("h1",null,"Devices"),s.a.createElement("div",{className:"mx-auto max-w-lg mb-12"},s.a.createElement("div",{className:"py-1"},s.a.createElement("span",{className:"px-1 text-sm text-gray-600"},"Device ID"),s.a.createElement("input",{value:a,name:"deviceId",onChange:function(e){n(e.target.value)},placeholder:"",type:"text",className:"text-md block px-3 py-2 rounded-lg w-full bg-white border-2 border-gray-300 placeholder-gray-600 shadow-md focus:placeholder-gray-500 focus:bg-white focus:border-gray-600 focus:outline-none"}),s.a.createElement("button",{type:"button",onClick:f,className:"mt-3 text-lg font-semibold bg-gray-800 w-full text-white rounded-lg px-6 py-3 block shadow-xl hover:text-white hover:bg-black"},"Activate Device"),i)))};function O(e,t,a,n,r,c,l){try{var s=e[c](l),o=s.value}catch(d){return void a(d)}s.done?t(o):Promise.resolve(o).then(n,r)}var C=function(){var e=Object(u.b)(),t=Object(l.useState)(!1),a=t[0],n=t[1],r=Object(l.useState)(!1),o=r[0],d=r[1],i=function(){var t,a=(t=c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(!1),t.next=4,e.resendEmailVerification();case 4:n(!0),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),d(!0),n(!1);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})),function(){var e=this,a=arguments;return new Promise((function(n,r){var c=t.apply(e,a);function l(e){O(c,n,r,l,s,"next",e)}function s(e){O(c,n,r,l,s,"throw",e)}l(void 0)}))});return function(){return a.apply(this,arguments)}}();return e.isAuthReady?e.emailVerified?null:s.a.createElement("div",{className:"bg-orange-200 p-4"},s.a.createElement("p",{className:"container mx-auto text-center"},"Please, confirm your e-mail address (",e.email,"). ",s.a.createElement("br",null),!a&&s.a.createElement("button",{onClick:i},"Click here to re-send e-mail confirmation."),a&&s.a.createElement(s.a.Fragment,null,s.a.createElement("br",null)," Verification e-mail sent. Please, check your inbox and follow the instructions."),o&&s.a.createElement(s.a.Fragment,null,s.a.createElement("br",null)," Error! Try again in a few minutes."))):null};t.default=function(){return s.a.createElement(d.a,{app:!0},s.a.createElement(C,null),s.a.createElement("div",{className:"container mx-auto mt-12"},s.a.createElement(o.Router,{basepath:"/app"},s.a.createElement(j,{path:"/devices"}),s.a.createElement(m,{path:"/create-scene"}),s.a.createElement(f,{path:"/"}),s.a.createElement(E,{path:"/scene/:sceneId"}),s.a.createElement(k,{path:"/update-password"}))))}}}]);
//# sourceMappingURL=component---src-pages-app-js-85973e3e8c18ee8d9da6.js.map